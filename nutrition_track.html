<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nutrition Tracker</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
    }
    input, button {
      padding: 10px;
      width: 100%;
      margin-bottom: 10px;
      font-size: 16px;
    }
    .results, .totals {
      background: #f7f7f7;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>ü•ó Meal Nutrition Analyzer</h2>
  <input type="text" id="mealInput" placeholder="Enter a meal (e.g., 2 eggs and toast)" />
  <button onclick="analyzeMeal()">Track Meal</button>

  <div class="results" id="mealResults"></div>
  <div class="totals" id="nutritionTotals">
    <h3>üßÆ Nutrition Totals</h3>
    <p>Calories: <span id="totalCalories">0</span></p>
    <p>Protein: <span id="totalProtein">0</span> g</p>
    <p>Fat: <span id="totalFat">0</span> g</p>
    <p>Carbs: <span id="totalCarbs">0</span> g</p>
  </div>

  <script>
    let totalCalories = 0;
    let totalProtein = 0;
    let totalFat = 0;
    let totalCarbs = 0;

    async function analyzeMeal() {
      const meal = document.getElementById("mealInput").value;
      if (!meal) return;

      const response = await fetch("https://trackapi.nutritionix.com/v2/natural/nutrients", {
        method: "POST",
        headers: {
          "x-app-id": "7688c68f",         // üîÅ Replace this
          "x-app-key": "5b73c9212b1cd6df81b92bc862575f9f",       // üîÅ Replace this
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          query: meal,
          timezone: "US/Eastern"
        })
      });

      const data = await response.json();
      const mealDiv = document.getElementById("mealResults");
      mealDiv.innerHTML = `<h3>üç¥ Meal Breakdown</h3>`;

      data.foods.forEach(food => {
        const { food_name, nf_calories, nf_total_fat, nf_protein, nf_total_carbohydrate } = food;

        totalCalories += nf_calories;
        totalProtein += nf_protein;
        totalFat += nf_total_fat;
        totalCarbs += nf_total_carbohydrate;

        mealDiv.innerHTML += `
          <p>
            <strong>${food_name}</strong>: 
            ${Math.round(nf_calories)} cal, 
            ${nf_protein}g protein, 
            ${nf_total_fat}g fat, 
            ${nf_total_carbohydrate}g carbs
          </p>
        `;
      });

      updateTotals();
      document.getElementById("mealInput").value = "";
    }

    function updateTotals() {
      document.getElementById("totalCalories").textContent = Math.round(totalCalories);
      document.getElementById("totalProtein").textContent = totalProtein.toFixed(1);
      document.getElementById("totalFat").textContent = totalFat.toFixed(1);
      document.getElementById("totalCarbs").textContent = totalCarbs.toFixed(1);
    }
  </script>
</body>
</html>
